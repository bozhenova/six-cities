(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{225:function(e,t,r){var a={"./af":82,"./af.js":82,"./ar":83,"./ar-dz":84,"./ar-dz.js":84,"./ar-kw":85,"./ar-kw.js":85,"./ar-ly":86,"./ar-ly.js":86,"./ar-ma":87,"./ar-ma.js":87,"./ar-sa":88,"./ar-sa.js":88,"./ar-tn":89,"./ar-tn.js":89,"./ar.js":83,"./az":90,"./az.js":90,"./be":91,"./be.js":91,"./bg":92,"./bg.js":92,"./bm":93,"./bm.js":93,"./bn":94,"./bn.js":94,"./bo":95,"./bo.js":95,"./br":96,"./br.js":96,"./bs":97,"./bs.js":97,"./ca":98,"./ca.js":98,"./cs":99,"./cs.js":99,"./cv":100,"./cv.js":100,"./cy":101,"./cy.js":101,"./da":102,"./da.js":102,"./de":103,"./de-at":104,"./de-at.js":104,"./de-ch":105,"./de-ch.js":105,"./de.js":103,"./dv":106,"./dv.js":106,"./el":107,"./el.js":107,"./en-au":108,"./en-au.js":108,"./en-ca":109,"./en-ca.js":109,"./en-gb":110,"./en-gb.js":110,"./en-ie":111,"./en-ie.js":111,"./en-il":112,"./en-il.js":112,"./en-in":113,"./en-in.js":113,"./en-nz":114,"./en-nz.js":114,"./en-sg":115,"./en-sg.js":115,"./eo":116,"./eo.js":116,"./es":117,"./es-do":118,"./es-do.js":118,"./es-us":119,"./es-us.js":119,"./es.js":117,"./et":120,"./et.js":120,"./eu":121,"./eu.js":121,"./fa":122,"./fa.js":122,"./fi":123,"./fi.js":123,"./fil":124,"./fil.js":124,"./fo":125,"./fo.js":125,"./fr":126,"./fr-ca":127,"./fr-ca.js":127,"./fr-ch":128,"./fr-ch.js":128,"./fr.js":126,"./fy":129,"./fy.js":129,"./ga":130,"./ga.js":130,"./gd":131,"./gd.js":131,"./gl":132,"./gl.js":132,"./gom-deva":133,"./gom-deva.js":133,"./gom-latn":134,"./gom-latn.js":134,"./gu":135,"./gu.js":135,"./he":136,"./he.js":136,"./hi":137,"./hi.js":137,"./hr":138,"./hr.js":138,"./hu":139,"./hu.js":139,"./hy-am":140,"./hy-am.js":140,"./id":141,"./id.js":141,"./is":142,"./is.js":142,"./it":143,"./it-ch":144,"./it-ch.js":144,"./it.js":143,"./ja":145,"./ja.js":145,"./jv":146,"./jv.js":146,"./ka":147,"./ka.js":147,"./kk":148,"./kk.js":148,"./km":149,"./km.js":149,"./kn":150,"./kn.js":150,"./ko":151,"./ko.js":151,"./ku":152,"./ku.js":152,"./ky":153,"./ky.js":153,"./lb":154,"./lb.js":154,"./lo":155,"./lo.js":155,"./lt":156,"./lt.js":156,"./lv":157,"./lv.js":157,"./me":158,"./me.js":158,"./mi":159,"./mi.js":159,"./mk":160,"./mk.js":160,"./ml":161,"./ml.js":161,"./mn":162,"./mn.js":162,"./mr":163,"./mr.js":163,"./ms":164,"./ms-my":165,"./ms-my.js":165,"./ms.js":164,"./mt":166,"./mt.js":166,"./my":167,"./my.js":167,"./nb":168,"./nb.js":168,"./ne":169,"./ne.js":169,"./nl":170,"./nl-be":171,"./nl-be.js":171,"./nl.js":170,"./nn":172,"./nn.js":172,"./oc-lnc":173,"./oc-lnc.js":173,"./pa-in":174,"./pa-in.js":174,"./pl":175,"./pl.js":175,"./pt":176,"./pt-br":177,"./pt-br.js":177,"./pt.js":176,"./ro":178,"./ro.js":178,"./ru":179,"./ru.js":179,"./sd":180,"./sd.js":180,"./se":181,"./se.js":181,"./si":182,"./si.js":182,"./sk":183,"./sk.js":183,"./sl":184,"./sl.js":184,"./sq":185,"./sq.js":185,"./sr":186,"./sr-cyrl":187,"./sr-cyrl.js":187,"./sr.js":186,"./ss":188,"./ss.js":188,"./sv":189,"./sv.js":189,"./sw":190,"./sw.js":190,"./ta":191,"./ta.js":191,"./te":192,"./te.js":192,"./tet":193,"./tet.js":193,"./tg":194,"./tg.js":194,"./th":195,"./th.js":195,"./tk":196,"./tk.js":196,"./tl-ph":197,"./tl-ph.js":197,"./tlh":198,"./tlh.js":198,"./tr":199,"./tr.js":199,"./tzl":200,"./tzl.js":200,"./tzm":201,"./tzm-latn":202,"./tzm-latn.js":202,"./tzm.js":201,"./ug-cn":203,"./ug-cn.js":203,"./uk":204,"./uk.js":204,"./ur":205,"./ur.js":205,"./uz":206,"./uz-latn":207,"./uz-latn.js":207,"./uz.js":206,"./vi":208,"./vi.js":208,"./x-pseudo":209,"./x-pseudo.js":209,"./yo":210,"./yo.js":210,"./zh-cn":211,"./zh-cn.js":211,"./zh-hk":212,"./zh-hk.js":212,"./zh-mo":213,"./zh-mo.js":213,"./zh-tw":214,"./zh-tw.js":214};function n(e){var t=s(e);return r(t)}function s(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=s,e.exports=n,n.id=225},227:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),s=r(11),i=r.n(s),c=r(21),o=r(69),l=r(8),u=function(e){return e.reviews.reviews.sort((function(e,t){return o(t.date).valueOf()-o(e.date).valueOf()})).slice(0,l.a.AMOUNT_COMMENTS)},m=function(e){return e.reviews.isSent},f=function(e){return e.reviews.isSending},p=r(72),d=r(3),_=r(17),y=function(e){return{type:d.a.LOAD_REVIEWS,payload:e}},h=function(e){return{type:d.a.POST_REVIEW,payload:e}},v=function(e){return{type:d.a.SET_IS_SENT_STATUS,payload:e}},b=function(e){return{type:d.a.SET_IS_SENDING_STATUS,payload:e}},g=function(e){return{type:d.a.SET_ERROR,payload:e}},E=function(e){return function(t,r,a){return a.get("".concat(l.a.COMMENTS_PATH,"/").concat(e)).then((function(e){return Object(_.a)(e)})).then((function(e){t(y(e))}))}},j=function(e,t){return function(r,a,n){return n.post("".concat(l.a.COMMENTS_PATH,"/").concat(e),{comment:t.comment,rating:t.rating}).then((function(e){return Object(_.a)(e)})).then((function(e){r(h(e)),r(b(!1)),r(v(!0)),r(g(""))})).catch((function(e){r(g(e)),r(b(!1))}))}},N=r(70),w=r(71),O=r(79),T=r(35),k=r(73);function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],a=!0,n=!1,s=void 0;try{for(var i,c=e[Symbol.iterator]();!(a=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){n=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(n)throw s}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var S=function(e){var t=e.currentOfferId,r=Object(a.useRef)(),s=Object(c.c)(),i=R(Object(a.useState)(0),2),o=i[0],u=i[1],p=R(Object(a.useState)(""),2),d=p[0],_=p[1],y=R(Object(a.useState)(!1),2),h=y[0],g=y[1],E=Object(c.d)(m),N=Object(c.d)(f);return Object(a.useEffect)((function(){var e=d.length>=l.a.MIN_TEXT_LENGTH&&d.length<=l.a.MAX_TEXT_LENGTH;g(e&&o>0),E&&(g(!1),u(0),_(""),s(v(!1)),r.current.reset())}),[d,o,E]),n.a.createElement("form",{className:"reviews__form form",action:"#",method:"post",onSubmit:function(e){e.preventDefault(),s(j(t,{comment:d,rating:o})),s(b(!0))},ref:r},n.a.createElement("label",{className:"reviews__label form__label",htmlFor:"review"},"Your review"),n.a.createElement("div",{className:"reviews__rating-form form__rating",onChange:function(e){u(e.target.value)}},n.a.createElement("input",{className:"form__rating-input visually-hidden",name:"rating",value:"5",id:"5-stars",type:"radio"}),n.a.createElement("label",{htmlFor:"5-stars",className:"reviews__rating-label form__rating-label",title:"perfect"},n.a.createElement("svg",{className:"form__star-image",width:"37",height:"33"},n.a.createElement("use",{xlinkHref:"#icon-star"}))),n.a.createElement("input",{className:"form__rating-input visually-hidden",name:"rating",value:"4",id:"4-stars",type:"radio"}),n.a.createElement("label",{htmlFor:"4-stars",className:"reviews__rating-label form__rating-label",title:"good"},n.a.createElement("svg",{className:"form__star-image",width:"37",height:"33"},n.a.createElement("use",{xlinkHref:"#icon-star"}))),n.a.createElement("input",{className:"form__rating-input visually-hidden",name:"rating",value:"3",id:"3-stars",type:"radio"}),n.a.createElement("label",{htmlFor:"3-stars",className:"reviews__rating-label form__rating-label",title:"not bad"},n.a.createElement("svg",{className:"form__star-image",width:"37",height:"33"},n.a.createElement("use",{xlinkHref:"#icon-star"}))),n.a.createElement("input",{className:"form__rating-input visually-hidden",name:"rating",value:"2",id:"2-stars",type:"radio"}),n.a.createElement("label",{htmlFor:"2-stars",className:"reviews__rating-label form__rating-label",title:"badly"},n.a.createElement("svg",{className:"form__star-image",width:"37",height:"33"},n.a.createElement("use",{xlinkHref:"#icon-star"}))),n.a.createElement("input",{className:"form__rating-input visually-hidden",name:"rating",value:"1",id:"1-star",type:"radio"}),n.a.createElement("label",{htmlFor:"1-star",className:"reviews__rating-label form__rating-label",title:"terribly"},n.a.createElement("svg",{className:"form__star-image",width:"37",height:"33"},n.a.createElement("use",{xlinkHref:"#icon-star"})))),n.a.createElement("textarea",{className:"reviews__textarea form__textarea",id:"review",name:"review",placeholder:"Tell how was your stay, what you like and what can be improved",value:d,onChange:function(e){_(e.target.value)},minLength:l.a.MIN_TEXT_LENGTH,maxLength:l.a.MAX_TEXT_LENGTH}),n.a.createElement("div",{className:"reviews__button-wrapper"},n.a.createElement("p",{className:"reviews__help"},"To submit review please make sure to set"," ",n.a.createElement("span",{className:"reviews__star"},"rating")," and describe your stay with at least"," ",n.a.createElement("b",{className:"reviews__text-amount"},l.a.MIN_TEXT_LENGTH," characters"),"."),n.a.createElement("button",{className:"reviews__submit form__submit button",type:"submit",disabled:!h||N},N?"Sending...":"Submit")))};S.propTypes={currentOfferId:i.a.number.isRequired};var M=S,P=r(80),I=r(22),C=function(e){var t=e.review,r=t.comment,a=t.date,s=t.rating,i=t.user;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"reviews__user user"},n.a.createElement("div",{className:"reviews__avatar-wrapper user__avatar-wrapper"},n.a.createElement("img",{className:"reviews__avatar user__avatar",src:i.avatarUrl,width:"54",height:"54",alt:i.name})),n.a.createElement("span",{className:"reviews__user-name"},i.name),i.isPro&&n.a.createElement("span",{className:"reviews__user-status"},"Pro")),n.a.createElement("div",{className:"reviews__info"},n.a.createElement("div",{className:"reviews__rating rating"},n.a.createElement("div",{className:"reviews__stars rating__stars"},n.a.createElement("span",{style:{width:"".concat(100*s/l.a.MAX_RATING,"%")}}),n.a.createElement("span",{className:"visually-hidden"},"Rating"))),n.a.createElement("p",{className:"reviews__text"},r),n.a.createElement("time",{className:"reviews__time",dateTime:a},Object(I.b)(a))))};C.propTypes={comment:i.a.string,date:i.a.string,rating:i.a.number,user:i.a.shape({avatarUrl:i.a.string,isPro:i.a.bool,name:i.a.string})};var x=C,z=function(e){var t=e.reviews.map((function(e){return n.a.createElement("li",{className:"reviews__item",key:e.id},n.a.createElement(x,{review:e}))}));return n.a.createElement("ul",{className:"reviews__list"},t)};z.propTypes={reviews:i.a.array};var q=z,F=r(76);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=X(e);if(t){var n=X(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return V(this,r)}}function V(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var K,Y,B,W=r(81),Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(i,e);var t,r,a,s=G(i);function i(){return D(this,i),s.apply(this,arguments)}return t=i,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.loadNearbyOffers,r=e.loadReviews,a=e.match,n=e.setCurrentOffer,s=parseInt(a.params.id);n(s),t(s),r(s)}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.loadNearbyOffers,a=t.loadReviews,n=t.match,s=t.setCurrentOffer,i=parseInt(n.params.id);e.match!==n&&(s(i),r(i),a(i))}},{key:"render",value:function(){var e=this.props,t=e.reviews,r=e.nearbyOffers,a=e.match,s=e.offer,i=e.isAuthorizationRequired,c=s.isPremium,o=s.rating,u=s.price,m=s.title,f=s.isFavorite,p=s.bedrooms,d=s.maxAdults,_=s.host,y=s.description,h=s.images,v=s.goods,b=s.id,g=Object.keys(s).length?h.slice(0,l.a.AMOUNT_PHOTOS).map((function(e){return n.a.createElement("div",{className:"property__image-wrapper",key:W.generate()},n.a.createElement("img",{className:"property__image",src:e,alt:"Photo property"}))})):null,E=Object.keys(s).length?v.map((function(e){return n.a.createElement("li",{className:"property__inside-item",key:W.generate()},e)})):null;return n.a.createElement("div",{className:"page"},n.a.createElement(k.a,null),n.a.createElement("main",{className:"page__main page__main--property"},Object.keys(s).length?n.a.createElement("section",{className:"property"},n.a.createElement("div",{className:"property__gallery-container container"},n.a.createElement("div",{className:"property__gallery"},g)),n.a.createElement("div",{className:"property__container container"},n.a.createElement("div",{className:"property__wrapper"},c&&n.a.createElement("div",{className:"place-card__mark"},n.a.createElement("span",null,"Premium")),n.a.createElement("div",{className:"property__name-wrapper"},n.a.createElement("h1",{className:"property__name"},m),n.a.createElement(F.a,{id:b,isFavorite:f,prefixClass:"property",width:31,height:33,match:a})),n.a.createElement("div",{className:"property__rating rating"},n.a.createElement("div",{className:"property__stars rating__stars"},n.a.createElement("span",{style:{width:"".concat(100*o/l.a.MAX_RATING,"%")}}),n.a.createElement("span",{className:"visually-hidden"},"Rating")),n.a.createElement("span",{className:"property__rating-value rating__value"},o)),n.a.createElement("ul",{className:"property__features"},n.a.createElement("li",{className:"property__feature property__feature--entire"},"Entire place"),n.a.createElement("li",{className:"property__feature property__feature--bedrooms"},"".concat(p,p>1?" Bedrooms":" Bedroom")),n.a.createElement("li",{className:"property__feature property__feature--adults"},"Max ",d," adults")),n.a.createElement("div",{className:"property__price"},n.a.createElement("b",{className:"property__price-value"},"€",u),n.a.createElement("span",{className:"property__price-text"}," night")),n.a.createElement("div",{className:"property__inside"},n.a.createElement("h2",{className:"property__inside-title"},"What's inside"),n.a.createElement("ul",{className:"property__inside-list"},E)),n.a.createElement("div",{className:"property__host"},n.a.createElement("h2",{className:"property__host-title"},"Meet the host"),n.a.createElement("div",{className:"property__host-user user"},n.a.createElement("div",{className:"property__avatar-wrapper property__avatar-wrapper--pro user__avatar-wrapper"},n.a.createElement("img",{className:"property__avatar user__avatar",src:"".concat(_.avatar),width:"74",height:"74",alt:"Host avatar"})),n.a.createElement("span",{className:"property__user-name"},_.name),_.isPro&&n.a.createElement("span",{className:"property__user-status"},"Pro")),n.a.createElement("div",{className:"property__description"},n.a.createElement("p",{className:"property__text"},y))),t.length>0&&n.a.createElement("section",{className:"property__reviews reviews"},n.a.createElement("h2",{className:"reviews__title"},"Reviews ·",n.a.createElement("span",{className:"reviews__amount"},t.length)),n.a.createElement(q,{reviews:t}),!i&&n.a.createElement(M,{currentOfferId:b})))),n.a.createElement("section",{className:"property__map map"},r.length?n.a.createElement(O.a,{offers:r}):null)):n.a.createElement(T.a,null),n.a.createElement("div",{className:"container"},r.length?n.a.createElement("section",{className:"near-places places"},n.a.createElement("h2",{className:"near-places__title"},"Other places in the neighbourhood"),n.a.createElement(P.a,{offers:r,classModOffers:["near-places__list"],classModPrefix:"near-places",mainClassMod:"near-places__card"})):null)))}}])&&L(t.prototype,r),a&&L(t,a),i}(a.PureComponent);K=Z,Y="propTypes",B={offer:i.a.object,nearbyOffers:i.a.array.isRequired,reviews:i.a.any,loadReviews:i.a.func.isRequired,setCurrentOffer:i.a.func.isRequired,loadNearbyOffers:i.a.func.isRequired,match:i.a.object.isRequired},Y in K?Object.defineProperty(K,Y,{value:B,enumerable:!0,configurable:!0,writable:!0}):K[Y]=B;var $=Object(c.b)((function(e,t){var r=t.match.params.id;return{offer:Object(N.d)(e,r)||{},nearbyOffers:Object(N.c)(e),reviews:u(e),isAuthorizationRequired:Object(p.a)(e)}}),(function(e){return{loadReviews:function(t){return e(E(t))},loadNearbyOffers:function(t){return e(w.b.loadNearbyOffers(t))},setCurrentOffer:function(t){return e(w.a.setCurrentOffer(t))}}}))(Z);t.default=$},70:function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return l})),r.d(t,"f",(function(){return u})),r.d(t,"e",(function(){return m})),r.d(t,"d",(function(){return f})),r.d(t,"b",(function(){return p}));var a=r(74),n=r(22);function s(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var c=function(e){return e.data.offers},o=function(e){return e.data.nearbyOffers},l=function(e){return e.data.currentCity},u=Object(a.a)(c,(function(e){return s(new Set(e.map((function(e){return e.city.name}))))})),m=Object(a.a)(l,c,(function(e){return e.data.sortType}),(function(e,t,r){var a=t.filter((function(t){return t.city.name===e}));switch(r){case"popular":return a;case"to-high":return a.slice().sort((function(e,t){return e.price-t.price}));case"to-low":return a.slice().sort((function(e,t){return t.price-e.price}));case"top-rated":return a.slice().sort((function(e,t){return t.rating-e.rating}))}})),f=Object(a.a)(c,(function(e,t){return c(e).find((function(e){return e.id==t}))}),(function(e,t){return e.find((function(e){return e.id===t.id}))})),p=Object(a.a)((function(e){return e.data.currentOfferId}),c,(function(e,t){var r=Object(n.a)(e,t)||{};return Object.keys(r).length?r.place.coords:[0,0]}))},71:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return c}));var a=r(3),n=r(8),s=r(17),i=(r(70),{setCity:function(e){return{type:a.a.SET_CITY,payload:e}},setCurrentOffer:function(e){return{type:a.a.SET_CURRENT_OFFER,payload:e}},setSortType:function(e){return{type:a.a.SET_SORT_TYPE,payload:e}},loadOffers:function(e){return{type:a.a.LOAD_OFFERS,payload:e}},loadNearbyOffers:function(e){return{type:a.a.LOAD_NEARBY_OFFERS,payload:e}}}),c={loadOffers:function(){return function(e,t,r){return r.get(n.a.HOTEL_PATH).then((function(e){return Object(s.d)(e)})).then((function(t){return e(i.loadOffers(t))}))}},loadNearbyOffers:function(e){return function(t,r,a){return a.get("".concat(n.a.HOTEL_PATH,"/").concat(e).concat(n.a.NEARBY_PATH)).then((function(e){return Object(s.d)(e)})).then((function(e){return t(i.loadNearbyOffers(e))}))}}}},72:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n}));var a=function(e){return e.user.isAuthorizationRequired},n=function(e){return e.user.loginData}},73:function(e,t,r){"use strict";var a=r(0),n=r.n(a),s=r(68),i=r(39),c=r(21),o=r(8),l=r(72),u=r(23),m=function(){var e=Object(c.d)(l.b),t=Object(c.d)(l.a),r=Object(c.c)(),a=Object(s.g)(),m=t?n.a.createElement("span",{className:"header__login",onClick:function(){r(u.a.requiredAuthorization(!0)),a.push(o.a.LOGIN_PATH)},tabIndex:0,onKeyPress:function(e){e.key===o.b.ENTER&&(r(u.a.requiredAuthorization(!0)),a.push("/login"))}},"Sign in"):n.a.createElement("span",{className:"header__user-name user__name"},e.email);return n.a.createElement("header",{className:"header"},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"header__wrapper"},n.a.createElement("div",{className:"header__left"},n.a.createElement(i.a,{to:"/",className:"header__logo-link header__logo-link--active"},n.a.createElement("img",{className:"header__logo",src:"img/logo.svg",alt:"6 cities logo",width:"81",height:"41"}))),n.a.createElement("nav",{className:"header__nav"},n.a.createElement("ul",{className:"header__nav-list"},n.a.createElement("li",{className:"header__nav-item user"},n.a.createElement(i.a,{to:t?"/login":"/favorites",className:"header__nav-link header__nav-link--profile"},n.a.createElement("div",{className:"header__avatar-wrapper user__avatar-wrapper",style:e.avatarUrl&&{backgroundImage:"url(".concat(o.a.BASE_URL).concat(e.avatarUrl,")")}}),m)))))))};t.a=m},75:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var a=r(3),n=r(8),s=r(17),i=function(e){return{type:a.a.LOAD_FAVORITES,payload:e}},c=function(e){return{type:a.a.UPDATE_FAVORITES,payload:e}},o={loadFavorites:function(){return function(e,t,r){return r.get(n.a.FAVORITE_PATH).then((function(e){return Object(s.d)(e)})).then((function(t){return e(i(t))}))}},updateFavorites:function(e,t){return function(r,a,i){return i.post("".concat(n.a.FAVORITE_PATH,"/").concat(e,"/").concat(+!t)).then((function(e){return Object(s.c)(e)})).then((function(e){return r(c(e))}))}}}},76:function(e,t,r){"use strict";var a=r(0),n=r.n(a),s=r(21),i=r(11),c=r.n(i),o=r(8),l=r(14),u=r(71),m=r(75),f=r(72),p=function(e){var t=e.isFavorite,r=e.prefixClass,a=e.width,i=e.height,c=e.id,p=e.match,d=Object(s.c)(),_=Object(s.d)(f.a),y=function(e){var t=e.params.id;switch(e.path){case"/":return void d(u.b.loadOffers());case"/offer/:id":return d(u.b.loadNearbyOffers(t)),void d(u.b.loadOffers());case"/favorites":return void d(m.a.loadFavorites())}};return n.a.createElement("button",{type:"button",className:"".concat(r,"__bookmark-button ").concat(!_&&t?"place-card__bookmark-button--active":""," button"),"aria-pressed":t?"true":"false",onClick:function(){_?l.a.push(o.a.LOGIN_PATH):function(e,t,r){d(m.a.updateFavorites(e,t)),y(r,e)}(c,t,p)}},n.a.createElement("svg",{className:"place-card__bookmark-icon","aria-hidden":"true",width:a,height:i},n.a.createElement("use",{xlinkHref:"#icon-bookmark"})),n.a.createElement("span",{className:"visually-hidden"},t?"In":"To"," bookmarks"))};p.propTypes={id:c.a.number.isRequired,match:c.a.object.isRequired,isFavorite:c.a.bool.isRequired,prefixClass:c.a.string.isRequired,width:c.a.number.isRequired,height:c.a.number.isRequired};var d=p;t.a=d},77:function(e,t,r){"use strict";var a=r(0),n=r.n(a),s=r(11),i=r.n(s),c=r(39),o=r(68),l=r(76),u=r(8),m=function(e){var t=e.offerDetails,r=t.title,a=t.id,s=t.previewPhoto,i=t.isPremium,o=t.isFavorite,m=t.price,f=t.type,p=t.rating,d=e.mainClassMod,_=void 0===d?"":d,y=e.classModPrefix,h=void 0===y?"":y,v=e.selectOffer,b=e.match,g=function(){"/"===b.path&&v(a)},E=function(){"/offer/:id"===b.path&&v(a)};return n.a.createElement("article",{className:"".concat(_," place-card")},i?n.a.createElement("div",{className:"place-card__mark"},n.a.createElement("span",null,"Premium")):null,n.a.createElement("div",{className:"".concat(h,"__image-wrapper place-card__image-wrapper"),onClick:E,onMouseEnter:g},n.a.createElement("button",{type:"button"},n.a.createElement(c.a,{to:"/offer/".concat(a)},n.a.createElement("img",{className:"place-card__image",src:s,width:"".concat("/favorites"===b.path?"150":"260"),height:"".concat("/favorites"===b.path?"110":"200"),alt:r})))),n.a.createElement("div",{className:"".concat(h,"__card-info place-card__info")},n.a.createElement("div",{className:"place-card__price-wrapper"},n.a.createElement("div",{className:"place-card__price"},n.a.createElement("b",{className:"place-card__price-value"},"€",m),n.a.createElement("span",{className:"place-card__price-text"},"/ night")),n.a.createElement(l.a,{id:a,isFavorite:o,prefixClass:"place-card",width:18,height:19,match:b})),n.a.createElement("div",{className:"place-card__rating rating"},n.a.createElement("div",{className:"place-card__stars rating__stars"},n.a.createElement("span",{style:{width:"".concat(100*p/u.a.MAX_RATING,"%")}}),n.a.createElement("span",{className:"visually-hidden"},"Rating"))),n.a.createElement("h2",{className:"place-card__name",onClick:E,onMouseEnter:g},n.a.createElement(c.a,{to:"/offer/".concat(a)},r)),n.a.createElement("p",{className:"place-card__type"},f)))};m.propTypes={offerDetails:i.a.object.isRequired,match:i.a.object.isRequired,classModPrefix:i.a.string.isRequired,mainClassMod:i.a.string.isRequired,selectOffer:i.a.func};var f=Object(o.h)(m);t.a=f},79:function(e,t,r){"use strict";var a=r(0),n=r.n(a),s=r(11),i=r.n(s),c=r(215),o=r.n(c),l=r(21),u=r(70);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw s}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=g(e);if(t){var n=g(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return v(this,r)}}function v(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j={ID:"map",MARKER_PATH:"img/pin.svg",ACTIVE_MARKER_PATH:"img/pin-active.svg",MARKER_SIZE:[30,30],TITLE_LAYER:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png"},N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(i,e);var t,r,a,s=h(i);function i(){var e;d(this,i);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return E(b(e=s.call.apply(s,[this].concat(r))),"coordinates",e.props.offers.map((function(e){return e.place.coords}))),E(b(e),"city",e.props.offers[0].city),E(b(e),"group",null),E(b(e),"icon",o.a.icon({iconUrl:j.MARKER_PATH,iconSize:j.MARKER_SIZE})),E(b(e),"activeIcon",o.a.icon({iconUrl:j.ACTIVE_MARKER_PATH,iconSize:j.MARKER_SIZE})),e}return t=i,(r=[{key:"addMarkers",value:function(){this.group=o.a.layerGroup().addTo(this.map);var e,t=f(this.coordinates);try{for(t.s();!(e=t.n()).done;){var r=e.value;o.a.marker(r,{icon:this.icon}).addTo(this.group)}}catch(e){t.e(e)}finally{t.f()}o.a.marker(this.props.currentOfferCoords,{icon:this.activeIcon}).addTo(this.group)}},{key:"initMap",value:function(){this.map=o.a.map(j.ID,{center:this.city.coords,zoom:this.city.zoom,zoomControl:!1,marker:!0,scrollWheelZoom:!1}),this.map.setView(this.city.coords,this.city.zoom),o.a.tileLayer(j.TITLE_LAYER).addTo(this.map),this.addMarkers()}},{key:"componentDidMount",value:function(){this.initMap()}},{key:"componentDidUpdate",value:function(){this.city=this.props.offers[0].city,this.coordinates=this.props.offers.map((function(e){return e.place.coords})),this.group.clearLayers(),this.map.setView(this.city.coords,this.city.zoom);var e,t=f(this.coordinates);try{for(t.s();!(e=t.n()).done;){var r=e.value;o.a.marker(r,{icon:this.icon}).addTo(this.group)}}catch(e){t.e(e)}finally{t.f()}o.a.marker(this.props.currentOfferCoords,{icon:this.activeIcon}).addTo(this.group)}},{key:"render",value:function(){return n.a.createElement("div",{style:{width:"100%",height:"100%"},className:"cities__map",id:"map"})}}])&&_(t.prototype,r),a&&_(t,a),i}(a.PureComponent);E(N,"propTypes",{offers:i.a.array.isRequired,currentOfferCoords:i.a.array.isRequired}),E(N,"defaultProps",{offers:[]});var w=Object(l.b)((function(e){return{currentOfferCoords:Object(u.b)(e)}}))(N);t.a=w},80:function(e,t,r){"use strict";var a=r(0),n=r.n(a),s=r(21),i=r(11),c=r.n(i),o=r(77),l=r(71),u=function(e){var t=e.classModPrefix,r=e.offers,a=e.mainClassMod,i=e.classModOffers,c=Object(s.c)(),u=function(e){c(l.a.setCurrentOffer(e))},m=r.map((function(e){return n.a.createElement(o.a,{key:e.id,offerDetails:e,selectOffer:u,classModPrefix:t,mainClassMod:a})}));return n.a.createElement("div",{className:"".concat(i.join(" ")," places__list ")},m)};u.propTypes={classModPrefix:c.a.string.isRequired,offers:c.a.array.isRequired,classModOffers:c.a.array.isRequired,mainClassMod:c.a.string.isRequired};var m=u;t.a=m}}]);
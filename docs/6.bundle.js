(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{228:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(21),i=n(11),o=n.n(i),u=n(14),s=n(73),l=n(39),f=function(){return a.a.createElement("footer",{className:"footer container"},a.a.createElement(l.a,{className:"footer__logo-link",to:"/"},a.a.createElement("img",{className:"footer__logo",src:"img/logo.svg",alt:"6 cities logo",width:"64",height:"33"})))};function p(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=n(75),v=n(71),y=function(e){return a.a.createElement("main",{className:"page__main page__main--favorites page__main--favorites-empty"},a.a.createElement("div",{className:"page__favorites-container container"},a.a.createElement("section",{className:"favorites favorites--empty"},a.a.createElement("h1",{className:"visually-hidden"},"Favorites (empty)"),a.a.createElement("div",{className:"favorites__status-wrapper"},a.a.createElement("b",{className:"favorites__status"},"Nothing yet saved."),a.a.createElement("p",{className:"favorites__status-description"},"Save properties to narrow down search or plan yor future trips.")))))},h=n(77);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var a=w(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return N(this,n)}}function N(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(i,e);var t,n,r,c=O(i);function i(){var e;b(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return R(j(e=c.call.apply(c,[this].concat(n))),"onCityClick",(function(t){t.preventDefault(),(0,e.props.changeCurrentCity)(t.currentTarget.getAttribute("data-city")),u.a.push("/")})),e}return t=i,(n=[{key:"componentDidMount",value:function(){this.props.loadFavorites()}},{key:"render",value:function(){var e=this,t=this.props,n=t.favorites,r=t.cities;return a.a.createElement("div",{className:"page"},a.a.createElement(s.a,null),r.length?a.a.createElement("main",{className:"page__main page__main--favorites"},a.a.createElement("div",{className:"page__favorites-container container"},a.a.createElement("section",{className:"favorites"},a.a.createElement("h1",{className:"favorites__title"},"Saved listing"),a.a.createElement("ul",{className:"favorites__list"},r.map((function(t){return a.a.createElement("li",{key:t,className:"favorites__locations-items"},a.a.createElement("div",{className:"favorites__locations locations locations--current"},a.a.createElement("div",{className:"locations__item"},a.a.createElement("button",{type:"button","data-city":t,onClick:e.onCityClick,className:"locations__item-link"},a.a.createElement("span",null,t)))),a.a.createElement("div",{className:"favorites__places"},n[t].map((function(e){return a.a.createElement(h.a,{key:e.id,mainClassMod:"favorites__card",classModPrefix:"favorites",offerDetails:e})}))))})))))):a.a.createElement(y,null),a.a.createElement(f,null))}}])&&g(t.prototype,n),r&&g(t,r),i}(r.PureComponent);R(A,"propTypes",{favorites:o.a.object,cities:o.a.array,loadFavorites:o.a.func.isRequired,changeCurrentCity:o.a.func.isRequired,updateFavorites:o.a.func.isRequired});var C=Object(c.b)((function(e){var t=function(e){var t=function(e){return e.favorites.favorites}(e),n={};t.length&&(p(new Set(p(t.map((function(e){return e.city.name}))))).forEach((function(e){n[e]=[]})),t.forEach((function(e){n[e.city.name].push(e)})));return n}(e);return{cities:Object.keys(t),favorites:t}}),(function(e){return{loadFavorites:function(){return e(d.a.loadFavorites())},updateFavorites:function(t){return e(d.a.updateFavorites(t))},changeCurrentCity:function(t){return e(v.a.setCity(t))}}}))(A);t.default=C},39:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(68),a=n(2),c=n(0),i=n.n(c),o=n(7),u=(n(11),n(1)),s=n(5),l=n(6);i.a.Component;i.a.Component;var f=function(e,t){return"function"==typeof e?e(t):e},p=function(e,t){return"string"==typeof e?Object(o.c)(e,null,null,t):e},m=function(e){return e},d=i.a.forwardRef;void 0===d&&(d=m);var v=d((function(e,t){var n=e.innerRef,r=e.navigate,a=e.onClick,c=Object(s.a)(e,["innerRef","navigate","onClick"]),o=c.target,l=Object(u.a)({},c,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||o&&"_self"!==o||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return l.ref=m!==d&&t||n,i.a.createElement("a",l)}));var y=d((function(e,t){var n=e.component,a=void 0===n?v:n,c=e.replace,o=e.to,y=e.innerRef,h=Object(s.a)(e,["component","replace","to","innerRef"]);return i.a.createElement(r.e.Consumer,null,(function(e){e||Object(l.a)(!1);var n=e.history,r=p(f(o,e.location),e.location),s=r?n.createHref(r):"",v=Object(u.a)({},h,{href:s,navigate:function(){var t=f(o,e.location);(c?n.replace:n.push)(t)}});return m!==d?v.ref=t||y:v.innerRef=y,i.a.createElement(a,v)}))})),h=function(e){return e},_=i.a.forwardRef;void 0===_&&(_=h);_((function(e,t){var n=e["aria-current"],a=void 0===n?"page":n,c=e.activeClassName,o=void 0===c?"active":c,m=e.activeStyle,d=e.className,v=e.exact,b=e.isActive,g=e.location,E=e.sensitive,O=e.strict,N=e.style,j=e.to,w=e.innerRef,R=Object(s.a)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return i.a.createElement(r.e.Consumer,null,(function(e){e||Object(l.a)(!1);var n=g||e.location,c=p(f(j,n),n),s=c.pathname,A=s&&s.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),C=A?Object(r.f)(n.pathname,{path:A,exact:v,sensitive:E,strict:O}):null,k=!!(b?b(C,n):C),S=k?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(d,o):d,T=k?Object(u.a)({},N,{},m):N,F=Object(u.a)({"aria-current":k&&a||null,className:S,style:T,to:c},R);return h!==_?F.ref=t||w:F.innerRef=w,i.a.createElement(y,F)}))}))},70:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"f",(function(){return l})),n.d(t,"e",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return m}));var r=n(74),a=n(22);function c(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o=function(e){return e.data.offers},u=function(e){return e.data.nearbyOffers},s=function(e){return e.data.currentCity},l=Object(r.a)(o,(function(e){return c(new Set(e.map((function(e){return e.city.name}))))})),f=Object(r.a)(s,o,(function(e){return e.data.sortType}),(function(e,t,n){var r=t.filter((function(t){return t.city.name===e}));switch(n){case"popular":return r;case"to-high":return r.slice().sort((function(e,t){return e.price-t.price}));case"to-low":return r.slice().sort((function(e,t){return t.price-e.price}));case"top-rated":return r.slice().sort((function(e,t){return t.rating-e.rating}))}})),p=Object(r.a)(o,(function(e,t){return o(e).find((function(e){return e.id==t}))}),(function(e,t){return e.find((function(e){return e.id===t.id}))})),m=Object(r.a)((function(e){return e.data.currentOfferId}),o,(function(e,t){var n=Object(a.a)(e,t)||{};return Object.keys(n).length?n.place.coords:[0,0]}))},71:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(3),a=n(8),c=n(17),i=(n(70),{setCity:function(e){return{type:r.a.SET_CITY,payload:e}},setCurrentOffer:function(e){return{type:r.a.SET_CURRENT_OFFER,payload:e}},setSortType:function(e){return{type:r.a.SET_SORT_TYPE,payload:e}},loadOffers:function(e){return{type:r.a.LOAD_OFFERS,payload:e}},loadNearbyOffers:function(e){return{type:r.a.LOAD_NEARBY_OFFERS,payload:e}}}),o={loadOffers:function(){return function(e,t,n){return n.get(a.a.HOTEL_PATH).then((function(e){return Object(c.d)(e)})).then((function(t){return e(i.loadOffers(t))}))}},loadNearbyOffers:function(e){return function(t,n,r){return r.get("".concat(a.a.HOTEL_PATH,"/").concat(e).concat(a.a.NEARBY_PATH)).then((function(e){return Object(c.d)(e)})).then((function(e){return t(i.loadNearbyOffers(e))}))}}}},72:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=function(e){return e.user.isAuthorizationRequired},a=function(e){return e.user.loginData}},73:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(68),i=n(39),o=n(21),u=n(8),s=n(72),l=n(23),f=function(){var e=Object(o.d)(s.b),t=Object(o.d)(s.a),n=Object(o.c)(),r=Object(c.g)(),f=t?a.a.createElement("span",{className:"header__login",onClick:function(){n(l.a.requiredAuthorization(!0)),r.push(u.a.LOGIN_PATH)},tabIndex:0,onKeyPress:function(e){e.key===u.b.ENTER&&(n(l.a.requiredAuthorization(!0)),r.push("/login"))}},"Sign in"):a.a.createElement("span",{className:"header__user-name user__name"},e.email);return a.a.createElement("header",{className:"header"},a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"header__wrapper"},a.a.createElement("div",{className:"header__left"},a.a.createElement(i.a,{to:"/",className:"header__logo-link header__logo-link--active"},a.a.createElement("img",{className:"header__logo",src:"img/logo.svg",alt:"6 cities logo",width:"81",height:"41"}))),a.a.createElement("nav",{className:"header__nav"},a.a.createElement("ul",{className:"header__nav-list"},a.a.createElement("li",{className:"header__nav-item user"},a.a.createElement(i.a,{to:t?"/login":"/favorites",className:"header__nav-link header__nav-link--profile"},a.a.createElement("div",{className:"header__avatar-wrapper user__avatar-wrapper",style:e.avatarUrl&&{backgroundImage:"url(".concat(u.a.BASE_URL).concat(e.avatarUrl,")")}}),f)))))))};t.a=f},74:function(e,t,n){"use strict";function r(e,t){return e===t}function a(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,a=0;a<r;a++)if(!e(t[a],n[a]))return!1;return!0}function c(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}n.d(t,"a",(function(){return i}));var i=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];var i=0,o=r.pop(),u=c(r),s=e.apply(void 0,[function(){return i++,o.apply(null,arguments)}].concat(n)),l=e((function(){for(var e=[],t=u.length,n=0;n<t;n++)e.push(u[n].apply(null,arguments));return s.apply(null,e)}));return l.resultFunc=o,l.dependencies=u,l.recomputations=function(){return i},l.resetRecomputations=function(){return i=0},l}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=null,c=null;return function(){return a(t,n,arguments)||(c=e.apply(null,arguments)),n=arguments,c}}))},75:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(3),a=n(8),c=n(17),i=function(e){return{type:r.a.LOAD_FAVORITES,payload:e}},o=function(e){return{type:r.a.UPDATE_FAVORITES,payload:e}},u={loadFavorites:function(){return function(e,t,n){return n.get(a.a.FAVORITE_PATH).then((function(e){return Object(c.d)(e)})).then((function(t){return e(i(t))}))}},updateFavorites:function(e,t){return function(n,r,i){return i.post("".concat(a.a.FAVORITE_PATH,"/").concat(e,"/").concat(+!t)).then((function(e){return Object(c.c)(e)})).then((function(e){return n(o(e))}))}}}},76:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(21),i=n(11),o=n.n(i),u=n(8),s=n(14),l=n(71),f=n(75),p=n(72),m=function(e){var t=e.isFavorite,n=e.prefixClass,r=e.width,i=e.height,o=e.id,m=e.match,d=Object(c.c)(),v=Object(c.d)(p.a),y=function(e){var t=e.params.id;switch(e.path){case"/":return void d(l.b.loadOffers());case"/offer/:id":return d(l.b.loadNearbyOffers(t)),void d(l.b.loadOffers());case"/favorites":return void d(f.a.loadFavorites())}};return a.a.createElement("button",{type:"button",className:"".concat(n,"__bookmark-button ").concat(!v&&t?"place-card__bookmark-button--active":""," button"),"aria-pressed":t?"true":"false",onClick:function(){v?s.a.push(u.a.LOGIN_PATH):function(e,t,n){d(f.a.updateFavorites(e,t)),y(n,e)}(o,t,m)}},a.a.createElement("svg",{className:"place-card__bookmark-icon","aria-hidden":"true",width:r,height:i},a.a.createElement("use",{xlinkHref:"#icon-bookmark"})),a.a.createElement("span",{className:"visually-hidden"},t?"In":"To"," bookmarks"))};m.propTypes={id:o.a.number.isRequired,match:o.a.object.isRequired,isFavorite:o.a.bool.isRequired,prefixClass:o.a.string.isRequired,width:o.a.number.isRequired,height:o.a.number.isRequired};var d=m;t.a=d},77:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(11),i=n.n(c),o=n(39),u=n(68),s=n(76),l=n(8),f=function(e){var t=e.offerDetails,n=t.title,r=t.id,c=t.previewPhoto,i=t.isPremium,u=t.isFavorite,f=t.price,p=t.type,m=t.rating,d=e.mainClassMod,v=void 0===d?"":d,y=e.classModPrefix,h=void 0===y?"":y,_=e.selectOffer,b=e.match,g=function(){"/"===b.path&&_(r)},E=function(){"/offer/:id"===b.path&&_(r)};return a.a.createElement("article",{className:"".concat(v," place-card")},i?a.a.createElement("div",{className:"place-card__mark"},a.a.createElement("span",null,"Premium")):null,a.a.createElement("div",{className:"".concat(h,"__image-wrapper place-card__image-wrapper"),onClick:E,onMouseEnter:g},a.a.createElement("button",{type:"button"},a.a.createElement(o.a,{to:"/offer/".concat(r)},a.a.createElement("img",{className:"place-card__image",src:c,width:"".concat("/favorites"===b.path?"150":"260"),height:"".concat("/favorites"===b.path?"110":"200"),alt:n})))),a.a.createElement("div",{className:"".concat(h,"__card-info place-card__info")},a.a.createElement("div",{className:"place-card__price-wrapper"},a.a.createElement("div",{className:"place-card__price"},a.a.createElement("b",{className:"place-card__price-value"},"€",f),a.a.createElement("span",{className:"place-card__price-text"},"/ night")),a.a.createElement(s.a,{id:r,isFavorite:u,prefixClass:"place-card",width:18,height:19,match:b})),a.a.createElement("div",{className:"place-card__rating rating"},a.a.createElement("div",{className:"place-card__stars rating__stars"},a.a.createElement("span",{style:{width:"".concat(100*m/l.a.MAX_RATING,"%")}}),a.a.createElement("span",{className:"visually-hidden"},"Rating"))),a.a.createElement("h2",{className:"place-card__name",onClick:E,onMouseEnter:g},a.a.createElement(o.a,{to:"/offer/".concat(r)},n)),a.a.createElement("p",{className:"place-card__type"},p)))};f.propTypes={offerDetails:i.a.object.isRequired,match:i.a.object.isRequired,classModPrefix:i.a.string.isRequired,mainClassMod:i.a.string.isRequired,selectOffer:i.a.func};var p=Object(u.h)(f);t.a=p}}]);